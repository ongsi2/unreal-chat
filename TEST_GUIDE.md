# 실시간 채팅 테스트 가이드

## 1. 서버 실행

**중요**: 반드시 기존 서버를 종료하고 다시 시작하세요!

```bash
# 기존 프로세스 종료 (Ctrl+C)
# 그 다음 실행:
npm run dev
```

**확인 사항**:
터미널에 다음 메시지가 보여야 합니다:
```
> Ready on http://localhost:3333
> Socket.io server running
```

만약 이 메시지가 안 보이면 Socket.io가 작동하지 않습니다!

## 2. 브라우저 개발자 도구 열기

1. Chrome/Edge에서 F12 또는 우클릭 → 검사
2. **Console 탭** 열기

## 3. 채팅 테스트

### 3-1. 페이지 접속
```
http://localhost:3333/chatrooms
```

**Console에서 확인할 로그**:
```
Socket 연결됨: xxxxx (Socket ID가 보여야 함)
```

### 3-2. 채팅방 선택

왼쪽에서 "일반 채팅방" 클릭

**Console에서 확인할 로그**:
```
🔌 Socket.io 이벤트 리스너 설정: 1
👂 message:receive 리스너 등록 완료
🚪 채팅방 참가 요청: { roomId: '1', userId: 'user1', username: '사용자1' }
```

**서버 터미널에서 확인**:
```
사용자1님이 채팅방 1에 입장했습니다
```

### 3-3. 메시지 전송

1. 메시지 입력창에 "안녕하세요" 입력
2. 전송 버튼 클릭 또는 Enter

**Console에서 확인할 로그**:
```
📝 메시지 전송 시도: { content: "안녕하세요" }
👤 현재 사용자: { id: 'user1', ... }
🏠 현재 채팅방: { id: '1', ... }
🔌 Socket 연결 상태: true true
📤 메시지 발송: { id: 'msg_...', content: '안녕하세요', ... }
✅ 메시지 전송 완료
📨 메시지 수신: { ... }
✅ 메시지 추가: { ... }
```

**서버 터미널에서 확인**:
```
메시지 수신: { id: 'msg_...', content: '안녕하세요', ... }
```

## 4. 실시간 테스트 (2개 브라우저)

1. **Chrome에서** http://localhost:3333/chatrooms 열기
2. **Edge 또는 시크릿 모드에서** http://localhost:3333/chatrooms 열기
3. 양쪽에서 "일반 채팅방" 선택
4. 한쪽에서 메시지 입력 → **다른 쪽에서 즉시 표시되어야 함!**

## 5. 문제 해결

### 문제 1: "서버에 연결 중..." 계속 표시
**원인**: Socket.io 서버가 실행되지 않음
**해결**:
- 서버 재시작 (npm run dev)
- 터미널에 "Socket.io server running" 확인

### 문제 2: 메시지가 전송되지 않음
**확인**:
1. Console에서 "📝 메시지 전송 시도:" 로그 확인
2. "❌ 필수 정보 누락" 에러 확인
3. Socket 연결 상태가 true인지 확인

### 문제 3: 메시지가 화면에 안 나타남
**확인**:
1. Console에서 "📨 메시지 수신:" 로그 확인
2. "✅ 메시지 추가:" 로그 확인
3. 서버 터미널에서 "메시지 수신:" 로그 확인

### 문제 4: 채팅방 선택이 안 됨
**해결**:
- 페이지 새로고침 (F5)
- 서버 재시작

## 6. 새 채팅방 만들기

1. 우측 상단 "새 채팅방" 버튼 클릭
2. 채팅방 이름 입력 (예: "개발팀 채팅")
3. "생성하기" 클릭
4. 왼쪽 목록에 새 채팅방이 나타남
5. 클릭해서 입장!

---

## 디버깅 팁

모든 로그는 이모지로 시작합니다:
- 📝 메시지 전송 관련
- 📨 메시지 수신 관련
- 🔌 Socket 연결 관련
- ✅ 성공
- ❌ 에러
- ⚠️ 경고

Console을 보면서 어디서 문제가 생기는지 확인하세요!
